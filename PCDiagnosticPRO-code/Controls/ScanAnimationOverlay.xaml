<UserControl x:Class="PCDiagnosticPro.Controls.ScanAnimationOverlay"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" 
             xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
             mc:Ignorable="d" 
             d:DesignHeight="80" d:DesignWidth="400"
             x:Name="ScanOverlayControl">
    
    <UserControl.Resources>
        <!-- Animation pluie matrix verticale (subtil) -->
        <Storyboard x:Key="MatrixRainAnimation" RepeatBehavior="Forever">
            <DoubleAnimation Storyboard.TargetName="MatrixTransform"
                             Storyboard.TargetProperty="Y"
                             From="-20" To="20" Duration="0:0:2.5"/>
        </Storyboard>
        
        <!-- Animation fichiers droite â†’ gauche (train 1) -->
        <Storyboard x:Key="Files1Animation" RepeatBehavior="Forever">
            <DoubleAnimation Storyboard.TargetName="Files1Transform"
                             Storyboard.TargetProperty="X"
                             From="700" To="-150" Duration="0:0:10"/>
        </Storyboard>
        
        <!-- Animation fichiers droite â†’ gauche (train 2, dÃ©calÃ©) -->
        <Storyboard x:Key="Files2Animation" RepeatBehavior="Forever">
            <DoubleAnimation Storyboard.TargetName="Files2Transform"
                             Storyboard.TargetProperty="X"
                             From="700" To="-150" Duration="0:0:10"
                             BeginTime="0:0:5"/>
        </Storyboard>
        
        <!-- Micro pulsation sobre sur le texte "Scan en cours" (remplace la loupe) -->
        <Storyboard x:Key="PulseTextAnimation" RepeatBehavior="Forever">
            <DoubleAnimation Storyboard.TargetName="StatusText"
                             Storyboard.TargetProperty="Opacity"
                             From="0.5" To="1" Duration="0:0:1.2"
                             AutoReverse="True"/>
        </Storyboard>
    </UserControl.Resources>
    
    <UserControl.Triggers>
        <EventTrigger RoutedEvent="Loaded">
            <BeginStoryboard Storyboard="{StaticResource MatrixRainAnimation}"/>
            <BeginStoryboard Storyboard="{StaticResource Files1Animation}"/>
            <BeginStoryboard Storyboard="{StaticResource Files2Animation}"/>
            <BeginStoryboard Storyboard="{StaticResource PulseTextAnimation}"/>
        </EventTrigger>
    </UserControl.Triggers>
    
    <Grid ClipToBounds="True" Background="Transparent">
        
        <!-- FOND: Pluie Matrix (subtil) -->
        <Rectangle Opacity="0.06">
            <Rectangle.Fill>
                <VisualBrush TileMode="Tile" Viewport="0,0,45,22" ViewportUnits="Absolute" Stretch="None">
                    <VisualBrush.Visual>
                        <TextBlock Text="01001&#x0a;10110" FontFamily="Consolas" FontSize="9"
                                   Foreground="#FF5252" Opacity="0.7"/>
                    </VisualBrush.Visual>
                </VisualBrush>
            </Rectangle.Fill>
            <Rectangle.RenderTransform>
                <TranslateTransform x:Name="MatrixTransform"/>
            </Rectangle.RenderTransform>
        </Rectangle>
        
        <!-- PLAN MILIEU: Fichiers dÃ©filant -->
        <Canvas ClipToBounds="True" Margin="5,0">
            <Border Canvas.Top="20" Padding="6,3" CornerRadius="3"
                    Background="#2D333B" Opacity="0.6">
                <Border.RenderTransform>
                    <TranslateTransform x:Name="Files1Transform"/>
                </Border.RenderTransform>
                <StackPanel Orientation="Horizontal">
                    <TextBlock Text="ðŸ“„" FontSize="10" Margin="0,0,4,0"/>
                    <TextBlock Text="system32.dll" FontFamily="Consolas" FontSize="9" Foreground="#8B949E"/>
                </StackPanel>
            </Border>
            
            <Border Canvas.Top="42" Padding="6,3" CornerRadius="3"
                    Background="#2D333B" Opacity="0.5">
                <Border.RenderTransform>
                    <TranslateTransform x:Name="Files2Transform"/>
                </Border.RenderTransform>
                <StackPanel Orientation="Horizontal">
                    <TextBlock Text="ðŸ“„" FontSize="10" Margin="0,0,4,0"/>
                    <TextBlock Text="config.json" FontFamily="Consolas" FontSize="9" Foreground="#8B949E"/>
                </StackPanel>
            </Border>
        </Canvas>
        
        <!-- Texte status avec micro pulsation (plus de loupe) -->
        <TextBlock x:Name="StatusText" Text="Scan en coursâ€¦" 
                   HorizontalAlignment="Center" VerticalAlignment="Center"
                   FontFamily="Segoe UI" FontSize="12" FontWeight="SemiBold"
                   Foreground="#8B949E"/>
    </Grid>
</UserControl>
